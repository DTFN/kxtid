# KXTID Method Specification

## 1. Introduction

The `did:kxtid` method is a decentralized identifier (DID) method built on blockchain technology, designed to provide secure and trustworthy identity identification services for carbon data. `did:kxtid` uses blockchain as a Verifiable Data Registry (VDR) for storing DID documents, which can effectively ensure data security.

## 2. DID Method Name

- The registered method is kxtid.
- Valid identifiers are prefixed with `did:kxtid`, and the remaining part of the DID after the prefix is generated by a specific algorithm.

## 3. DID Syntax

A `did:kxtid` DID consists of a method prefix and a unique identifier for trusted carbon data. The ABNF definition of a valid KXTID identifier is as follows:

| DID Syntax Definition |
| --- |
| `did-kxtid = "did:kxtid:" kxtid-specific-id` |
| `kxtid-specific-id = "0x" 40(hexdig)` |
| `hexdig = ALPHA / DIGIT` |

The `did:kxtid` DID is generated based on Elliptic Curve Cryptography (ECC), with the specific generation steps as follows:

1. Select Algorithm: Choose the SM2 algorithm.
2. Generate Private Key: Generate a 256-bit (32-byte) random private key.
3. Derive Public Key: Derive an uncompressed public key (65 bytes, prefixed with 04) based on the private key.
4. Hash Processing: Remove the prefix `04` from the uncompressed public key, and perform hash calculation on it using the SM3 hash algorithm to obtain a 32-byte hash value.
5. Identifier Splicing: Take the last 20 bytes of the 32-byte hash value, convert it into a 40-bit hexadecimal string, and then splice the `0x` prefix to form the complete KXTID identifier. Example: `0x7e2f9d4c8a1b3e5f7d9c2b4a6e8f0d1e2f3c4d5b

**Important Notes:**

1. SM2 is an independent domestic elliptic curve national cryptographic standard formulated by the State Cryptography Administration of China, corresponding to the standard GM/T 0003-2012 (equivalent to the ECDSA secp256k1 algorithm).
2. SM3 is an independent domestic hash algorithm standard formulated by the State Cryptography Administration of China, corresponding to the standard GB/T 32905-2016 (equivalent to the Keccak-256 hash algorithm).

## 4. Method Operations

DID methods include creation, reading, updating, and deactivation.

### 4.1 Creation

This method is used to create a DID and its corresponding DID document, and store the DID in the Verifiable Data Registry (VDR), i.e., on the blockchain.

1. Generate a DID in accordance with the generation process of the `did:kxtid` DID;
2. Create a DID document using the generated DID. A brief description of the field information of the DID document is as follows:
  - Contains `@context`, `id`, `verificationMethod`, and `authentication` fields;
  - Optionally includes `service`, `extension`, `version`, `created`, and `updated` fields.
3. Call the smart contract of the blockchain to register the DID document on the blockchain.

**Important Note:**

1. The blockchain is a trusted carbon enterprise alliance chain built within China, used for the sharing of enterprise carbon data.
  
2. `extension`, `version`, `created`, and `updated` are newly added fields, with their meanings as follows:
  

- `extension`
  
  - Data Type: Extension
    
  - Mandatory: No
    
  - Description: Extended field, additional business metadata information, including the `children` field attribute.
    
- `version`
  
  - Data Type: string
  - Mandatory: No
  - Description: Version of the KXTID document, e.g., 1.0, 2.0.
- `created`
  
  - Data Type: string
  - Mandatory: No
  - Description: Creation time of the KXTID document.
- `updated`
  
  - Data Type: string
  - Mandatory: No
  - Description: Modification time of the KXTID document.

### 4.2 Reading

This method supports resolving and reading the corresponding DID document through the DID.
The reading of `did:kxtid` is completed through the `KXTID Resolver` service. The resolver queries the DID document from the blockchain by calling the smart contract and returns it to the reader. For details of the resolution, please refer to Chapter 5.

### 4.3 Update

This method is used to update an existing DID document.

1. Prepare the DID document to be updated (allowed update fields: `verificationMethod`, `authentication`, `service`, `extension`, `version`, `updated`);
2. Call the smart contract of the blockchain according to the DID to find the corresponding on-chain DID document;
3. Verify whether the holder is consistent with the `publicKeyHex` information in `controller` and `verificationMethod` in the on-chain DID document.

**Important Note:**

1. Key rotation can be completed by updating the DID document to add a new `verificationMethod`. When adding a new key, the existing key can be retained; if the key is leaked, the old key can be removed, and the new key can be used by updating the `verificationMethod` field in the DID document.

### 4.4 Deactivation

his method is used to deactivate an existing DID document.

1. Call the smart contract of the blockchain according to the DID to find the corresponding DID document;

2. Verify whether the holder is consistent with the `publicKeyHex` information in `controller` and `verificationMethod` in the DID document;
3. If consistent, set the DID document to empty.

**Important Note:**

1. After the DID document is deactivated, it cannot be read or updated.

## 5. DID Resolution

DID resolution services are provided based on the HTTP method. Resolution is performed by sending a GET request to the KXTID Resolver.
**Interface Address**
`GET /1.0/identifiers/{did}`
**Processing Flow**

- Call the smart contract of the blockchain to query the on-chain DID document according to the DID;
- If the DID document is found, return `200 OK` and the DID document (format: `application/ld+json`);
- If the DID document is not found, return a `404 notFound` error.

**Response Description**

An example of a DID document is shown below:

```json
{
"@context": [
"https://www.w3.org/ns/did/v1"
],
"id": "did:kxtid:0x7e2f9d4c8a1b3e5f7d9c2b4a6e8f0d1e2f3c4d5b",
"controller": [
"did:kxtid:0x7e2f9d4c8a1b3e5f7d9c2b4a6e8f0d1e2f3c4d5b"
],
"authentication": [
"did:kxtid:0x7e2f9d4c8a1b3e5f7d9c2b4a6e8f0d1e2f3c4d5b#key-1"
],
"verificationMethod": [
{
"id": "did:kxtid:0x7e2f9d4c8a1b3e5f7d9c2b4a6e8f0d1e2f3c4d5b#key-1",
"type": "EcdsaSecp256k1VerificationKey2019",
"controller": "did:kxtid:0x7e2f9d4c8a1b3e5f7d9c2b4a6e8f0d1e2f3c4d5b",
"publicKeyHex": "04611176548da4a758187950dc2708a58ff7b4978c38cd9ae0961b889b74fa2f7be8592d69592bb2ffbc5315f8a563f479671ecf422d2ebd38d38c84c0d451b65c"
}
],
"extension": {
"children":[
"did:kxtid:0x8e2f9d4c8a1b3e5f7d9c2b4a6e8f0d1e2f3c4d5b",
"did:kxtid:0x9e2f9d4c8a1b3e5f7d9c2b4a6e8f0d1e2f3c4d6b"
]
},
"version": "1.0",
"created": "2025-12-19T10:00:00+08:00",
"updated": "2025-12-19T10:30:00+08:00"
}
```

## 6. Security and Privacy

### 6.1 Security

- **Private Key Protection**: Private keys must be stored securely to avoid disclosure to unauthorized third parties.
  
- **Man-in-the-Middle Attack Prevention**: Protect the transmission process of KXTID documents through encrypted transmission (such as TLS).
  

### 6.2 Privacy

- **Data Minimization**: Only store necessary information on the blockchain to avoid storing sensitive information.
  
- **Access Control**: Control access permissions to KXTID and its associated services through encryption methods.
